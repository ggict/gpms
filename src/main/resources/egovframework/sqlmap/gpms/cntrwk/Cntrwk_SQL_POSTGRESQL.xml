<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="cntrwkDAO">

	<typeAlias alias="egovMap"	type="egovframework.rte.psl.dataaccess.util.EgovMap" />
	<typeAlias  alias="cntrwkSerarchVO" type="kr.go.gg.gpms.cntrwk.service.model.CntrwkDefaultVO"/>
	<typeAlias alias="cntrwkVO"	type="kr.go.gg.gpms.cntrwk.service.model.CntrwkVO" />

	<resultMap id="cntrwk.resultMap"
		class="cntrwkVO">
		<result property="CNTRWK_ID" column="CNTRWK_ID" columnIndex="1" /> <!-- 공사정보.공사_ID -->
		<result property="FULL_CNTRWK_NM" column="FULL_CNTRWK_NM" columnIndex="2" /> <!-- 공사정보.전체_공사_명 -->
		<result property="CNTRWK_SE" column="CNTRWK_SE" columnIndex="3" /> <!-- 공사정보.공사_구분 -->
		<result property="DEPT_CODE" column="DEPT_CODE" columnIndex="4" /> <!-- 공사정보.부서_코드 -->
		<result property="DETAIL_CNTRWK_NM" column="DETAIL_CNTRWK_NM" columnIndex="5" /> <!-- 공사정보.세부_공사_명 -->
		<result property="CNTRWK_CL" column="CNTRWK_CL" columnIndex="6" /> <!-- 공사정보.공사_분류 -->
		<result property="CNTRWK_YEAR" column="CNTRWK_YEAR" columnIndex="7" /> <!-- 공사정보.공사_연도 -->
		<result property="HT_SE" column="HT_SE" columnIndex="8" /> <!-- 공사정보.반기_구분 -->
		<result property="SPRVISR_NM" column="SPRVISR_NM" columnIndex="9" /> <!-- 공사정보.감독원_명 -->
		<result property="SPRVISR_TELNO" column="SPRVISR_TELNO" columnIndex="10" /> <!-- 공사정보.감독원_전화번호 -->
		<result property="SPRVISN_CO_NO" column="SPRVISN_CO_NO" columnIndex="11" /> <!-- 공사정보.감리_업체_번호 -->
		<result property="SPRVISN_CO_NM" column="SPRVISN_CO_NM" columnIndex="12" /> <!-- 공사정보.감리_업체_명 -->
		<result property="SPRVISN_CO_RPRSNT_TELNO" column="SPRVISN_CO_RPRSNT_TELNO" columnIndex="13" /> <!-- 공사정보.감리_업체_대표_전화번호 -->
		<result property="SPRVISN_CO_RPRSNTV_NM" column="SPRVISN_CO_RPRSNTV_NM" columnIndex="14" /> <!-- 공사정보.감리_업체_대표자_명 -->
		<result property="CNSTRCT_CO_NO" column="CNSTRCT_CO_NO" columnIndex="15" /> <!-- 공사정보.시공_업체_번호 -->
		<result property="CNSTRCT_CO_NM" column="CNSTRCT_CO_NM" columnIndex="16" /> <!-- 공사정보.시공_업체_명 -->
		<result property="CNSTRCT_CO_RPRSNTV_NM" column="CNSTRCT_CO_RPRSNTV_NM" columnIndex="17" /> <!-- 공사정보.시공_업체_대표자_명 -->
		<result property="CNSTRCT_CO_TELNO" column="CNSTRCT_CO_TELNO" columnIndex="18" /> <!-- 공사정보.시공_업체_전화번호 -->
		<result property="SPT_AGENT_NM" column="SPT_AGENT_NM" columnIndex="19" /> <!-- 공사정보.현장_대리인_명 -->
		<result property="SPT_AGENT_TELNO" column="SPT_AGENT_TELNO" columnIndex="20" /> <!-- 공사정보.현장_대리인_전화번호 -->
		<result property="TRACK_LEN" column="TRACK_LEN" columnIndex="21" /> <!-- 공사정보.1차로_연장 -->
		<result property="STRWRK_DE" column="STRWRK_DE" columnIndex="22" /> <!-- 공사정보.착공_일자 -->
		<result property="COMPET_DE" column="COMPET_DE" columnIndex="23" /> <!-- 공사정보.준공_일자 -->
		<result property="CNTRWK_OPERT_CN" column="CNTRWK_OPERT_CN" columnIndex="24" /> <!-- 공사정보.공사_작업_내용 -->
		<result property="FLAW_BEGIN_DE" column="FLAW_BEGIN_DE" columnIndex="25" /> <!-- 공사정보.하자_시작_일자 -->
		<result property="FLAW_END_DE" column="FLAW_END_DE" columnIndex="26" /> <!-- 공사정보.하자_종료_일자 -->
		<result property="TOT_AMOUNT" column="TOT_AMOUNT" columnIndex="27" /> <!-- 공사정보.총_금액 -->
		<result property="RPAIR_THICK_DC" column="RPAIR_THICK_DC" columnIndex="28" /> <!-- 공사정보.보수_두께_설명 -->
		<result property="RPAIR_THICK" column="RPAIR_THICK" columnIndex="29" /> <!-- 공사정보.보수_두께 -->
		<result property="RPAIR_AR" column="RPAIR_AR" columnIndex="30" /> <!-- 공사정보.보수_면적 -->
		<result property="RPAIR_BT" column="RPAIR_BT" columnIndex="31" /> <!-- 공사정보.보수_폭 -->
		<result property="USE_AT" column="USE_AT" columnIndex="32" /> <!-- 공사정보.사용_여부 -->
		<result property="DELETE_AT" column="DELETE_AT" columnIndex="33" /> <!-- 공사정보.삭제_여부 -->
		<result property="CRTR_NO" column="CRTR_NO" columnIndex="34" /> <!-- 공사정보.생성자_번호 -->
		<result property="CREAT_DT" column="CREAT_DT" columnIndex="35" /> <!-- 공사정보.생성_일시 -->
		<result property="UPDUSR_NO" column="UPDUSR_NO" columnIndex="36" /> <!-- 공사정보.수정자_번호 -->
		<result property="UPDT_DT" column="UPDT_DT" columnIndex="37" /> <!-- 공사정보.수정_일시 -->
		<result property="EXTRL_REGIST_AT" column="EXTRL_REGIST_AT" columnIndex="38" /> <!-- 공사정보.외부_등록_여부 -->
		<result property="FILE_NO" column="FILE_NO" columnIndex="39" /> <!-- 공사정보.파일_번호 -->

		<result property="CELL_ID_ARR" column="CELL_ID_ARR" columnIndex="40" />
	</resultMap>

	<insert id="cntrwkDAO.insertCntrwk">
		<selectKey resultClass="String" keyProperty="CNTRWK_ID">
  <![CDATA[
  select nextval('SEQ_TN_CNTRWK')
  ]]>
  </selectKey>
	<![CDATA[
		/* cntrwkDAO.insertCntrwk */
		/* 공사정보 등록 */
		INSERT INTO TN_CNTRWK (
			CNTRWK_ID /* 공사정보.공사_ID */
			, FULL_CNTRWK_NM /* 공사정보.전체_공사_명 */
			, CNTRWK_SE /* 공사정보.공사_구분 */
			, DEPT_CODE /* 공사정보.부서_코드 */
			, DETAIL_CNTRWK_NM /* 공사정보.세부_공사_명 */
			, CNTRWK_CL /* 공사정보.공사_분류 */
			, CNTRWK_YEAR /* 공사정보.공사_연도 */
			, HT_SE /* 공사정보.반기_구분 */
			, SPRVISR_NM /* 공사정보.감독원_명 */
			, SPRVISR_TELNO /* 공사정보.감독원_전화번호 */
			, SPRVISN_CO_NO /* 공사정보.감리_업체_번호 */
			, SPRVISN_CO_NM /* 공사정보.감리_업체_명 */
			, SPRVISN_CO_RPRSNT_TELNO /* 공사정보.감리_업체_대표_전화번호 */
			, SPRVISN_CO_RPRSNTV_NM /* 공사정보.감리_업체_대표자_명 */
			, CNSTRCT_CO_NO /* 공사정보.시공_업체_번호 */
			, CNSTRCT_CO_NM /* 공사정보.시공_업체_명 */
			, CNSTRCT_CO_RPRSNTV_NM /* 공사정보.시공_업체_대표자_명 */
			, CNSTRCT_CO_TELNO /* 공사정보.시공_업체_전화번호 */
			, SPT_AGENT_NM /* 공사정보.현장_대리인_명 */
			, SPT_AGENT_TELNO /* 공사정보.현장_대리인_전화번호 */
			, TRACK_LEN /* 공사정보.1차로_연장 */
			, STRWRK_DE /* 공사정보.착공_일자 */
			, COMPET_DE /* 공사정보.준공_일자 */
			, CNTRWK_OPERT_CN /* 공사정보.공사_작업_내용 */
			, FLAW_BEGIN_DE /* 공사정보.하자_시작_일자 */
			, FLAW_END_DE /* 공사정보.하자_종료_일자 */
			, TOT_AMOUNT /* 공사정보.총_금액 */
			, RPAIR_THICK_DC /* 공사정보.보수_두께_설명 */
			, RPAIR_THICK /* 공사정보.보수_두께 */
			, RPAIR_AR /* 공사정보.보수_면적 */
			, RPAIR_BT /* 공사정보.보수_폭 */
			, USE_AT /* 공사정보.사용_여부 */
			, DELETE_AT /* 공사정보.삭제_여부 */
			, CRTR_NO /* 공사정보.생성자_번호 */
			, CREAT_DT /* 공사정보.생성_일시 */
			, UPDUSR_NO /* 공사정보.수정자_번호 */
			, UPDT_DT /* 공사정보.수정_일시 */
			, EXTRL_REGIST_AT /* 공사정보.외부_등록_여부 */
			, FILE_NO /* 공사정보.파일_번호 */
		) VALUES (
			#CNTRWK_ID# /* 공사정보.공사_ID */
			, #FULL_CNTRWK_NM# /* 공사정보.전체_공사_명 */
			, #CNTRWK_SE# /* 공사정보.공사_구분 */
			, #DEPT_CODE# /* 공사정보.부서_코드 */
			, #DETAIL_CNTRWK_NM# /* 공사정보.세부_공사_명 */
			, #CNTRWK_CL# /* 공사정보.공사_분류 */
			, #CNTRWK_YEAR# /* 공사정보.공사_연도 */
			, #HT_SE# /* 공사정보.반기_구분 */
			, #SPRVISR_NM# /* 공사정보.감독원_명 */
			, #SPRVISR_TELNO# /* 공사정보.감독원_전화번호 */
			, #SPRVISN_CO_NO#::int /* 공사정보.감리_업체_번호 */
			, #SPRVISN_CO_NM# /* 공사정보.감리_업체_명 */
			, #SPRVISN_CO_RPRSNT_TELNO# /* 공사정보.감리_업체_대표_전화번호 */
			, #SPRVISN_CO_RPRSNTV_NM# /* 공사정보.감리_업체_대표자_명 */
			, #CNSTRCT_CO_NO#::int /* 공사정보.시공_업체_번호 */
			, #CNSTRCT_CO_NM# /* 공사정보.시공_업체_명 */
			, #CNSTRCT_CO_RPRSNTV_NM# /* 공사정보.시공_업체_대표자_명 */
			, #CNSTRCT_CO_TELNO# /* 공사정보.시공_업체_전화번호 */
			, #SPT_AGENT_NM# /* 공사정보.현장_대리인_명 */
			, #SPT_AGENT_TELNO# /* 공사정보.현장_대리인_전화번호 */
			, #TRACK_LEN#::int /* 공사정보.1차로_연장 */
			, #STRWRK_DE# /* 공사정보.착공_일자 */
			, #COMPET_DE# /* 공사정보.준공_일자 */
			, #CNTRWK_OPERT_CN# /* 공사정보.공사_작업_내용 */
			, #FLAW_BEGIN_DE# /* 공사정보.하자_시작_일자 */
			, #FLAW_END_DE# /* 공사정보.하자_종료_일자 */
			, #TOT_AMOUNT#::int /* 공사정보.총_금액 */
			, #RPAIR_THICK_DC# /* 공사정보.보수_두께_설명 */
			, #RPAIR_THICK#::int /* 공사정보.보수_두께 */
			, #RPAIR_AR#::int /* 공사정보.보수_면적 */
			, #RPAIR_BT#::int /* 공사정보.보수_폭 */
			, 'Y' /* 공사정보.사용_여부 */
			, 'N' /* 공사정보.삭제_여부 */
			, #CRTR_NO#::int /* 공사정보.생성자_번호 */
			, NOW() /* 공사정보.생성_일시 */
			, #UPDUSR_NO#::int /* 공사정보.수정자_번호 */
			, NOW() /* 공사정보.수정_일시 */
			, #EXTRL_REGIST_AT# /* 공사정보.외부_등록_여부 */
			, #FILE_NO#::int /* 공사정보.파일_번호 */
		)
]]>
	</insert>

	<update id="cntrwkDAO.updateCntrwk">
	<![CDATA[
		/* cntrwkDAO.updateCntrwk */
		/* 공사정보 수정 */
		UPDATE TN_CNTRWK SET



FULL_CNTRWK_NM = #FULL_CNTRWK_NM# /* 공사정보.전체_공사_명 */


, CNTRWK_SE = #CNTRWK_SE# /* 공사정보.공사_구분 */


, DEPT_CODE = #DEPT_CODE# /* 공사정보.부서_코드 */


, DETAIL_CNTRWK_NM = #DETAIL_CNTRWK_NM# /* 공사정보.세부_공사_명 */


, CNTRWK_CL = #CNTRWK_CL# /* 공사정보.공사_분류 */


, CNTRWK_YEAR = #CNTRWK_YEAR# /* 공사정보.공사_연도 */


, HT_SE = #HT_SE# /* 공사정보.반기_구분 */


, SPRVISR_NM = #SPRVISR_NM# /* 공사정보.감독원_명 */


, SPRVISR_TELNO = #SPRVISR_TELNO# /* 공사정보.감독원_전화번호 */


, SPRVISN_CO_NO = #SPRVISN_CO_NO#::int /* 공사정보.감리_업체_번호 */


, SPRVISN_CO_NM = #SPRVISN_CO_NM# /* 공사정보.감리_업체_명 */


, SPRVISN_CO_RPRSNT_TELNO = #SPRVISN_CO_RPRSNT_TELNO# /* 공사정보.감리_업체_대표_전화번호 */


, SPRVISN_CO_RPRSNTV_NM = #SPRVISN_CO_RPRSNTV_NM# /* 공사정보.감리_업체_대표자_명 */


, CNSTRCT_CO_NO = #CNSTRCT_CO_NO#::int /* 공사정보.시공_업체_번호 */


, CNSTRCT_CO_NM = #CNSTRCT_CO_NM# /* 공사정보.시공_업체_명 */


, CNSTRCT_CO_RPRSNTV_NM = #CNSTRCT_CO_RPRSNTV_NM# /* 공사정보.시공_업체_대표자_명 */


, CNSTRCT_CO_TELNO = #CNSTRCT_CO_TELNO# /* 공사정보.시공_업체_전화번호 */


, SPT_AGENT_NM = #SPT_AGENT_NM# /* 공사정보.현장_대리인_명 */


, SPT_AGENT_TELNO = #SPT_AGENT_TELNO# /* 공사정보.현장_대리인_전화번호 */


, TRACK_LEN = #TRACK_LEN#::int /* 공사정보.1차로_연장 */


, STRWRK_DE = #STRWRK_DE# /* 공사정보.착공_일자 */


, COMPET_DE = #COMPET_DE# /* 공사정보.준공_일자 */


, CNTRWK_OPERT_CN = #CNTRWK_OPERT_CN# /* 공사정보.공사_작업_내용 */


, FLAW_BEGIN_DE = #FLAW_BEGIN_DE# /* 공사정보.하자_시작_일자 */


, FLAW_END_DE = #FLAW_END_DE# /* 공사정보.하자_종료_일자 */


, TOT_AMOUNT = #TOT_AMOUNT#::int /* 공사정보.총_금액 */


, RPAIR_THICK_DC = #RPAIR_THICK_DC# /* 공사정보.보수_두께_설명 */


, RPAIR_THICK = #RPAIR_THICK#::int /* 공사정보.보수_두께 */


, RPAIR_AR = #RPAIR_AR#::int /* 공사정보.보수_면적 */

, RPAIR_BT = #RPAIR_BT#::int /* 공사정보.보수_폭 */

, UPDUSR_NO = #UPDUSR_NO#::int /* 공사정보.수정자_번호 */


, UPDT_DT = NOW() /* 공사정보.수정_일시 */


, EXTRL_REGIST_AT = #EXTRL_REGIST_AT# /* 공사정보.외부_등록_여부 */


, FILE_NO = #FILE_NO#::int /* 공사정보.파일_번호 */

		WHERE 1 = 1
		AND CNTRWK_ID = #CNTRWK_ID# /* 공사정보.공사_ID */
]]>
	</update>

	<delete id="cntrwkDAO.deleteCntrwk">
	<![CDATA[
		/* cntrwkDAO.deleteCntrwk */
		/* 공사정보 삭제 */
		UPDATE TN_CNTRWK SET
  DELETE_AT = 'Y' /* 공사정보.삭제_여부 */
, UPDUSR_NO = #UPDUSR_NO# /* 공사정보.수정자_번호 */
, UPDT_DT = NOW() /* 공사정보.수정_일시 */
		WHERE 1 = 1
		AND CNTRWK_ID = #CNTRWK_ID# /* 공사정보.공사_ID */
]]>
	</delete>

	<select id="cntrwkDAO.selectCntrwk" resultClass="cntrwkVO">
	<![CDATA[
		/* cntrwkDAO.selectCntrwk */
		/* 공사정보 조회 */
		SELECT
			tncntrwk.CNTRWK_ID /* 공사정보.공사_ID */
			, tncntrwk.FULL_CNTRWK_NM /* 공사정보.전체_공사_명 */
			, tncntrwk.CNTRWK_SE /* 공사정보.공사_구분 */
			, tncntrwk.DEPT_CODE /* 공사정보.부서_코드 */
			, tncntrwk.DETAIL_CNTRWK_NM /* 공사정보.세부_공사_명 */
			, tncntrwk.CNTRWK_CL /* 공사정보.공사_분류 */
			, tncntrwk.CNTRWK_YEAR /* 공사정보.공사_연도 */
			, tncntrwk.HT_SE /* 공사정보.반기_구분 */
			, tncntrwk.SPRVISR_NM /* 공사정보.감독원_명 */
			, tncntrwk.SPRVISR_TELNO /* 공사정보.감독원_전화번호 */
			, tncntrwk.SPRVISN_CO_NO /* 공사정보.감리_업체_번호 */
			, COALESCE((SELECT CO_NM  FROM TN_COMPANY tncompany WHERE tncompany.CO_NO = tncntrwk.SPRVISN_CO_NO), tncntrwk.SPRVISN_CO_NM) AS SPRVISN_CO_NM /* 공사정보.감리_업체_명 */
			, tncntrwk.SPRVISN_CO_RPRSNT_TELNO /* 공사정보.감리_업체_대표_전화번호 */
			, tncntrwk.SPRVISN_CO_RPRSNTV_NM /* 공사정보.감리_업체_대표자_명 */
			, tncntrwk.CNSTRCT_CO_NO /* 공사정보.시공_업체_번호 */
			, COALESCE((SELECT CO_NM  FROM TN_COMPANY tncompany WHERE tncompany.CO_NO = tncntrwk.CNSTRCT_CO_NO), tncntrwk.CNSTRCT_CO_NM) AS CNSTRCT_CO_NM/* 공사정보.시공_업체_명 */
			, tncntrwk.CNSTRCT_CO_RPRSNTV_NM /* 공사정보.시공_업체_대표자_명 */
			, tncntrwk.CNSTRCT_CO_TELNO /* 공사정보.시공_업체_전화번호 */
			, tncntrwk.SPT_AGENT_NM /* 공사정보.현장_대리인_명 */
			, tncntrwk.SPT_AGENT_TELNO /* 공사정보.현장_대리인_전화번호 */
			, COALESCE(dtl.TRACK_LEN,0) AS TRACK_LEN /* 공사정보.1차로_연장 */
			, tncntrwk.STRWRK_DE /* 공사정보.착공_일자 */
			, tncntrwk.COMPET_DE /* 공사정보.준공_일자 */
			, tncntrwk.CNTRWK_OPERT_CN /* 공사정보.공사_작업_내용 */
			, tncntrwk.FLAW_BEGIN_DE /* 공사정보.하자_시작_일자 */
			, tncntrwk.FLAW_END_DE /* 공사정보.하자_종료_일자 */
			, COALESCE(dtl.TOT_AMOUNT,0) AS TOT_AMOUNT /* 공사정보.총_금액 */
			, tncntrwk.RPAIR_THICK_DC /* 공사정보.보수_두께_설명 */
			, tncntrwk.RPAIR_THICK /* 공사정보.보수_두께 */
			, COALESCE(dtl.RPAIR_AR,0) AS RPAIR_AR /* 공사정보.보수_면적 */
			, tncntrwk.RPAIR_BT /* 공사정보.보수_폭 */
			, tncntrwk.USE_AT /* 공사정보.사용_여부 */
			, tncntrwk.DELETE_AT /* 공사정보.삭제_여부 */
			, tncntrwk.CRTR_NO /* 공사정보.생성자_번호 */
			, tncntrwk.CREAT_DT /* 공사정보.생성_일시 */
			, tncntrwk.UPDUSR_NO /* 공사정보.수정자_번호 */
			, tncntrwk.UPDT_DT /* 공사정보.수정_일시 */
			, tncntrwk.EXTRL_REGIST_AT /* 공사정보.외부_등록_여부 */
			, tncntrwk.FILE_NO /* 공사정보.파일_번호 */
			/*, dtl.ROUTE_CODE 노선 번호 */
		FROM TN_CNTRWK tncntrwk
			 LEFT OUTER JOIN (
                        SELECT
                            tncntrwkdtl.cntrwk_id,
                            /*tncntrwkdtl.route_code,*/
                            SUM(tncntrwkdtl.track_len) / 1000 AS track_len/* 공사상세정보.1차로_연장 */,
                            SUM(tncntrwkdtl.cntrwk_amount) AS tot_amount /* 공사상세정보.공사_금액 */,
                            SUM(tncntrwkdtl.rpair_ar) AS rpair_ar/* 공사상세정보.보수_면적 */
                        FROM
                            tn_cntrwk_dtl tncntrwkdtl
                        WHERE
                                1 = 1             /* 공사상세정보.공사_ID */
                            AND
                                tncntrwkdtl.use_at = 'Y'     /* 공사상세정보.사용_여부 */
                            AND
                                tncntrwkdtl.delete_at = 'N'   /* 공사상세정보.삭제_여부 */
                        GROUP BY
                            tncntrwkdtl.cntrwk_id /*,tncntrwkdtl.route_code*/
                    ) dtl ON tncntrwk.cntrwk_id = dtl.cntrwk_id
		WHERE 1 = 1
		AND tncntrwk.CNTRWK_ID = #CNTRWK_ID# /* 공사정보.공사_ID */
		AND tncntrwk.DELETE_AT = 'N'
		AND tncntrwk.USE_AT = 'Y'
]]>
	</select>

	<sql id="cntrwkDAO.selectCntrwkList.where">
		WHERE 1 = 1
		AND tncntrwk.DELETE_AT = 'N'
		<isEqual property="searchCondition" compareValue="0">
			AND tncntrwk.CNTRWK_ID = #searchKeyword#
		</isEqual>
		<isEqual property="searchCondition" compareValue="1">
			AND tncntrwk.FULL_CNTRWK_NM LIKE '%' || #searchKeyword# || '%'
		</isEqual>
		<isNotEmpty property="CNTRWK_ID"><![CDATA[ /* 공사정보.공사_ID */ AND tncntrwk.CNTRWK_ID = #CNTRWK_ID# ]]></isNotEmpty>
		<isNotEmpty property="SCH_CNTRWK_NM"><![CDATA[ /* 공사정보.전체_공사_명 */ ]]> AND tncntrwk.FULL_CNTRWK_NM LIKE '%' || #SCH_CNTRWK_NM# || '%'</isNotEmpty>
		<isNotEmpty property="CNTRWK_SE"><![CDATA[ /* 공사정보.공사_구분 */ AND tncntrwk.CNTRWK_SE = #CNTRWK_SE# ]]></isNotEmpty>
		<isNotEmpty property="DEPT_CODE"><![CDATA[ /* 공사정보.부서_코드 */ AND tncntrwk.DEPT_CODE = #DEPT_CODE# ]]></isNotEmpty>
		<isNotEmpty property="DETAIL_CNTRWK_NM"><![CDATA[ /* 공사정보.세부_공사_명 */ AND tncntrwk.DETAIL_CNTRWK_NM = #DETAIL_CNTRWK_NM# ]]></isNotEmpty>
		<isNotEmpty property="CNTRWK_CL"><![CDATA[ /* 공사정보.공사_분류 */ AND tncntrwk.CNTRWK_CL = #CNTRWK_CL# ]]></isNotEmpty>
		<isNotEmpty property="CNTRWK_YEAR"><![CDATA[ /* 공사정보.공사_연도 */ AND tncntrwk.CNTRWK_YEAR = #CNTRWK_YEAR# ]]></isNotEmpty>
		<isNotEmpty property="HT_SE"><![CDATA[ /* 공사정보.반기_구분 */ AND tncntrwk.HT_SE = #HT_SE# ]]></isNotEmpty>
		<isNotEmpty property="SPRVISR_NM"><![CDATA[ /* 공사정보.감독원_명 */ AND tncntrwk.SPRVISR_NM = #SPRVISR_NM# ]]></isNotEmpty>
		<isNotEmpty property="SPRVISR_TELNO"><![CDATA[ /* 공사정보.감독원_전화번호 */ AND tncntrwk.SPRVISR_TELNO = #SPRVISR_TELNO# ]]></isNotEmpty>
		<isNotEmpty property="SPRVISN_CO_NO"><![CDATA[ /* 공사정보.감리_업체_번호 */ AND tncntrwk.SPRVISN_CO_NO = #SPRVISN_CO_NO#::int ]]></isNotEmpty>
		<isNotEmpty property="SPRVISN_CO_NM"><![CDATA[ /* 공사정보.감리_업체_명 */ AND tncntrwk.SPRVISN_CO_NM = #SPRVISN_CO_NM# ]]></isNotEmpty>
		<isNotEmpty property="SPRVISN_CO_RPRSNT_TELNO"><![CDATA[ /* 공사정보.감리_업체_대표_전화번호 */ AND tncntrwk.SPRVISN_CO_RPRSNT_TELNO = #SPRVISN_CO_RPRSNT_TELNO# ]]></isNotEmpty>
		<isNotEmpty property="SPRVISN_CO_RPRSNTV_NM"><![CDATA[ /* 공사정보.감리_업체_대표자_명 */ AND tncntrwk.SPRVISN_CO_RPRSNTV_NM = #SPRVISN_CO_RPRSNTV_NM# ]]></isNotEmpty>
		<isNotEmpty property="CNSTRCT_CO_NO"><![CDATA[ /* 공사정보.시공_업체_번호 */ AND tncntrwk.CNSTRCT_CO_NO = #CNSTRCT_CO_NO#::int ]]></isNotEmpty>
		<isNotEmpty property="SCH_CO_NM"><![CDATA[ /* 공사정보.시공_업체_명 */]]> AND tncntrwk.CNSTRCT_CO_NM LIKE '%' || #SCH_CO_NM# || '%'</isNotEmpty>
		<isNotEmpty property="CNSTRCT_CO_RPRSNTV_NM"><![CDATA[ /* 공사정보.시공_업체_대표자_명 */ AND tncntrwk.CNSTRCT_CO_RPRSNTV_NM = #CNSTRCT_CO_RPRSNTV_NM# ]]></isNotEmpty>
		<isNotEmpty property="CNSTRCT_CO_TELNO"><![CDATA[ /* 공사정보.시공_업체_전화번호 */ AND tncntrwk.CNSTRCT_CO_TELNO = #CNSTRCT_CO_TELNO# ]]></isNotEmpty>
		<isNotEmpty property="SPT_AGENT_NM"><![CDATA[ /* 공사정보.현장_대리인_명 */ AND tncntrwk.SPT_AGENT_NM = #SPT_AGENT_NM# ]]></isNotEmpty>
		<isNotEmpty property="SPT_AGENT_TELNO"><![CDATA[ /* 공사정보.현장_대리인_전화번호 */ AND tncntrwk.SPT_AGENT_TELNO = #SPT_AGENT_TELNO# ]]></isNotEmpty>
		<isNotEmpty property="TRACK_LEN"><![CDATA[ /* 공사정보.1차로_연장 */ AND tncntrwk.TRACK_LEN = #TRACK_LEN#::int ]]></isNotEmpty>
		<isNotEmpty property="SCH_STRWRK_DE"><![CDATA[ /* 공사정보.착공_일자 */ AND tncntrwk.STRWRK_DE >= #SCH_STRWRK_DE# ]]></isNotEmpty>
		<isNotEmpty property="SCH_COMPET_DE"><![CDATA[ /* 공사정보.준공_일자 */ AND tncntrwk.COMPET_DE <= #SCH_COMPET_DE# ]]></isNotEmpty>
		<isNotEmpty property="CNTRWK_OPERT_CN"><![CDATA[ /* 공사정보.공사_작업_내용 */ AND tncntrwk.CNTRWK_OPERT_CN = #CNTRWK_OPERT_CN# ]]></isNotEmpty>
		<isNotEmpty property="FLAW_BEGIN_DE"><![CDATA[ /* 공사정보.하자_시작_일자 */ AND tncntrwk.FLAW_BEGIN_DE = #FLAW_BEGIN_DE# ]]></isNotEmpty>
		<isNotEmpty property="FLAW_END_DE"><![CDATA[ /* 공사정보.하자_종료_일자 */ AND tncntrwk.FLAW_END_DE = #FLAW_END_DE# ]]></isNotEmpty>
		<isNotEmpty property="TOT_AMOUNT"><![CDATA[ /* 공사정보.총_금액 */ AND tncntrwk.TOT_AMOUNT = #TOT_AMOUNT#::int ]]></isNotEmpty>
		<isNotEmpty property="RPAIR_THICK_DC"><![CDATA[ /* 공사정보.보수_두께_설명 */ AND tncntrwk.RPAIR_THICK_DC = #RPAIR_THICK_DC# ]]></isNotEmpty>
		<isNotEmpty property="RPAIR_THICK"><![CDATA[ /* 공사정보.보수_두께 */ AND tncntrwk.RPAIR_THICK = #RPAIR_THICK#::int ]]></isNotEmpty>
		<isNotEmpty property="RPAIR_AR"><![CDATA[ /* 공사정보.보수_면적 */ AND tncntrwk.RPAIR_AR = #RPAIR_AR#::int ]]></isNotEmpty>
		<isNotEmpty property="RPAIR_BT"><![CDATA[ /* 공사정보.보수_폭 */ AND tncntrwk.RPAIR_BT = #RPAIR_BT#::int ]]></isNotEmpty>
		<isNotEmpty property="USE_AT"><![CDATA[ /* 공사정보.사용_여부 */ AND tncntrwk.USE_AT = #USE_AT# ]]></isNotEmpty>
		<isNotEmpty property="DELETE_AT"><![CDATA[ /* 공사정보.삭제_여부 */ AND tncntrwk.DELETE_AT = #DELETE_AT# ]]></isNotEmpty>
		<isNotEmpty property="CRTR_NO"><![CDATA[ /* 공사정보.생성자_번호 */ AND tncntrwk.CRTR_NO = #CRTR_NO#::int ]]></isNotEmpty>
		<isNotEmpty property="CREAT_DT"><![CDATA[ /* 공사정보.생성_일시 */ AND tncntrwk.CREAT_DT = #CREAT_DT# ]]></isNotEmpty>
		<isNotEmpty property="UPDUSR_NO"><![CDATA[ /* 공사정보.수정자_번호 */ AND tncntrwk.UPDUSR_NO = #UPDUSR_NO#::int ]]></isNotEmpty>
		<isNotEmpty property="UPDT_DT"><![CDATA[ /* 공사정보.수정_일시 */ AND tncntrwk.UPDT_DT = #UPDT_DT# ]]></isNotEmpty>
		<isNotEmpty property="EXTRL_REGIST_AT"><![CDATA[ /* 공사정보.외부_등록_여부 */ AND tncntrwk.EXTRL_REGIST_AT = #EXTRL_REGIST_AT# ]]></isNotEmpty>
		<isNotEmpty property="FILE_NO"><![CDATA[ /* 공사정보.파일_번호 */ AND tncntrwk.FILE_NO = #FILE_NO#::int ]]></isNotEmpty>
</sql>

	<select id="cntrwkDAO.selectCntrwkListPage"
		parameterClass="cntrwkVO"
		resultClass="cntrwkVO">
<![CDATA[
		/* cntrwkDAO.selectCntrwkListPage */
		/* 공사정보 조회(페이징) */
		WITH tncntrwk AS
		(
		SELECT
				tncntrwk.CNTRWK_ID /* 공사정보.공사_ID */
				, tncntrwk.FULL_CNTRWK_NM /* 공사정보.전체_공사_명 */
				, tncntrwk.CNTRWK_SE /* 공사정보.공사_구분 */
				, tncntrwk.DEPT_CODE /* 공사정보.부서_코드 */
				, tncntrwk.DETAIL_CNTRWK_NM /* 공사정보.세부_공사_명 */
				, tncntrwk.CNTRWK_CL /* 공사정보.공사_분류 */
				, tncntrwk.CNTRWK_YEAR /* 공사정보.공사_연도 */
				, tncntrwk.HT_SE /* 공사정보.반기_구분 */
				, tncntrwk.SPRVISR_NM /* 공사정보.감독원_명 */
				, tncntrwk.SPRVISR_TELNO /* 공사정보.감독원_전화번호 */
				, tncntrwk.SPRVISN_CO_NO /* 공사정보.감리_업체_번호 */
				, tncntrwk.SPRVISN_CO_NM /* 공사정보.감리_업체_명 */
				, tncntrwk.SPRVISN_CO_RPRSNT_TELNO /* 공사정보.감리_업체_대표_전화번호 */
				, tncntrwk.SPRVISN_CO_RPRSNTV_NM /* 공사정보.감리_업체_대표자_명 */
				, tncntrwk.CNSTRCT_CO_NO /* 공사정보.시공_업체_번호 */
				, tncntrwk.CNSTRCT_CO_NM /* 공사정보.시공_업체_명 */
				, tncntrwk.CNSTRCT_CO_RPRSNTV_NM /* 공사정보.시공_업체_대표자_명 */
				, tncntrwk.CNSTRCT_CO_TELNO /* 공사정보.시공_업체_전화번호 */
				, tncntrwk.SPT_AGENT_NM /* 공사정보.현장_대리인_명 */
				, tncntrwk.SPT_AGENT_TELNO /* 공사정보.현장_대리인_전화번호 */
				, tncntrwk.TRACK_LEN /* 공사정보.1차로_연장 */
				, tncntrwk.STRWRK_DE /* 공사정보.착공_일자 */
				, tncntrwk.COMPET_DE /* 공사정보.준공_일자 */
				, tncntrwk.CNTRWK_OPERT_CN /* 공사정보.공사_작업_내용 */
				, tncntrwk.FLAW_BEGIN_DE /* 공사정보.하자_시작_일자 */
				, tncntrwk.FLAW_END_DE /* 공사정보.하자_종료_일자 */
				, tncntrwk.TOT_AMOUNT /* 공사정보.총_금액 */
				, tncntrwk.RPAIR_THICK_DC /* 공사정보.보수_두께_설명 */
				, tncntrwk.RPAIR_THICK /* 공사정보.보수_두께 */
				, tncntrwk.RPAIR_AR /* 공사정보.보수_면적 */
				, tncntrwk.RPAIR_BT /* 공사정보.보수_폭 */
				, tncntrwk.USE_AT /* 공사정보.사용_여부 */
				, tncntrwk.DELETE_AT /* 공사정보.삭제_여부 */
				, tncntrwk.CRTR_NO /* 공사정보.생성자_번호 */
				, tncntrwk.CREAT_DT /* 공사정보.생성_일시 */
				, tncntrwk.UPDUSR_NO /* 공사정보.수정자_번호 */
				, tncntrwk.UPDT_DT /* 공사정보.수정_일시 */
				, tncntrwk.EXTRL_REGIST_AT /* 공사정보.외부_등록_여부 */
				, tncntrwk.FILE_NO /* 공사정보.파일_번호 */

			FROM TN_CNTRWK tncntrwk
]]>
		WHERE 1 = 1

		<isEqual property="searchCondition" compareValue="0">
			AND tncntrwk.CNTRWK_ID = #searchKeyword#
		</isEqual>

		<isEqual property="searchCondition" compareValue="1">
			AND tncntrwk.FULL_CNTRWK_NM LIKE '%' || #searchKeyword# || '%'
		</isEqual>

			<isNotEmpty property="CNTRWK_ID">
				<![CDATA[
					/* 공사정보.공사_ID */
					AND tncntrwk.CNTRWK_ID = #CNTRWK_ID#
				]]>
			</isNotEmpty>

			<isNotEmpty property="FULL_CNTRWK_NM">
				<![CDATA[
					/* 공사정보.전체_공사_명 */
					AND tncntrwk.FULL_CNTRWK_NM = #FULL_CNTRWK_NM#
				]]>
			</isNotEmpty>

			<isNotEmpty property="CNTRWK_SE">
				<![CDATA[
					/* 공사정보.공사_구분 */
					AND tncntrwk.CNTRWK_SE = #CNTRWK_SE#
				]]>
			</isNotEmpty>

			<isNotEmpty property="DEPT_CODE">
				<![CDATA[
					/* 공사정보.부서_코드 */
					AND tncntrwk.DEPT_CODE = #DEPT_CODE#
				]]>
			</isNotEmpty>

			<isNotEmpty property="DETAIL_CNTRWK_NM">
				<![CDATA[
					/* 공사정보.세부_공사_명 */
					AND tncntrwk.DETAIL_CNTRWK_NM = #DETAIL_CNTRWK_NM#
				]]>
			</isNotEmpty>

			<isNotEmpty property="CNTRWK_CL">
				<![CDATA[
					/* 공사정보.공사_분류 */
					AND tncntrwk.CNTRWK_CL = #CNTRWK_CL#
				]]>
			</isNotEmpty>

			<isNotEmpty property="CNTRWK_YEAR">
				<![CDATA[
					/* 공사정보.공사_연도 */
					AND tncntrwk.CNTRWK_YEAR = #CNTRWK_YEAR#
				]]>
			</isNotEmpty>

			<isNotEmpty property="HT_SE">
				<![CDATA[
					/* 공사정보.반기_구분 */
					AND tncntrwk.HT_SE = #HT_SE#
				]]>
			</isNotEmpty>

			<isNotEmpty property="SPRVISR_NM">
				<![CDATA[
					/* 공사정보.감독원_명 */
					AND tncntrwk.SPRVISR_NM = #SPRVISR_NM#
				]]>
			</isNotEmpty>

			<isNotEmpty property="SPRVISR_TELNO">
				<![CDATA[
					/* 공사정보.감독원_전화번호 */
					AND tncntrwk.SPRVISR_TELNO = #SPRVISR_TELNO#
				]]>
			</isNotEmpty>

			<isNotEmpty property="SPRVISN_CO_NO">
				<![CDATA[
					/* 공사정보.감리_업체_번호 */
					AND tncntrwk.SPRVISN_CO_NO = #SPRVISN_CO_NO#::int
				]]>
			</isNotEmpty>

			<isNotEmpty property="SPRVISN_CO_NM">
				<![CDATA[
					/* 공사정보.감리_업체_명 */
					AND tncntrwk.SPRVISN_CO_NM = #SPRVISN_CO_NM#
				]]>
			</isNotEmpty>

			<isNotEmpty property="SPRVISN_CO_RPRSNT_TELNO">
				<![CDATA[
					/* 공사정보.감리_업체_대표_전화번호 */
					AND tncntrwk.SPRVISN_CO_RPRSNT_TELNO = #SPRVISN_CO_RPRSNT_TELNO#
				]]>
			</isNotEmpty>

			<isNotEmpty property="SPRVISN_CO_RPRSNTV_NM">
				<![CDATA[
					/* 공사정보.감리_업체_대표자_명 */
					AND tncntrwk.SPRVISN_CO_RPRSNTV_NM = #SPRVISN_CO_RPRSNTV_NM#
				]]>
			</isNotEmpty>

			<isNotEmpty property="CNSTRCT_CO_NO">
				<![CDATA[
					/* 공사정보.시공_업체_번호 */
					AND tncntrwk.CNSTRCT_CO_NO = #CNSTRCT_CO_NO#::int
				]]>
			</isNotEmpty>

			<isNotEmpty property="CNSTRCT_CO_NM">
				<![CDATA[
					/* 공사정보.시공_업체_명 */
					AND tncntrwk.CNSTRCT_CO_NM = #CNSTRCT_CO_NM#
				]]>
			</isNotEmpty>

			<isNotEmpty property="CNSTRCT_CO_RPRSNTV_NM">
				<![CDATA[
					/* 공사정보.시공_업체_대표자_명 */
					AND tncntrwk.CNSTRCT_CO_RPRSNTV_NM = #CNSTRCT_CO_RPRSNTV_NM#
				]]>
			</isNotEmpty>

			<isNotEmpty property="CNSTRCT_CO_TELNO">
				<![CDATA[
					/* 공사정보.시공_업체_전화번호 */
					AND tncntrwk.CNSTRCT_CO_TELNO = #CNSTRCT_CO_TELNO#
				]]>
			</isNotEmpty>

			<isNotEmpty property="SPT_AGENT_NM">
				<![CDATA[
					/* 공사정보.현장_대리인_명 */
					AND tncntrwk.SPT_AGENT_NM = #SPT_AGENT_NM#
				]]>
			</isNotEmpty>

			<isNotEmpty property="SPT_AGENT_TELNO">
				<![CDATA[
					/* 공사정보.현장_대리인_전화번호 */
					AND tncntrwk.SPT_AGENT_TELNO = #SPT_AGENT_TELNO#
				]]>
			</isNotEmpty>

			<isNotEmpty property="TRACK_LEN">
				<![CDATA[
					/* 공사정보.1차로_연장 */
					AND tncntrwk.TRACK_LEN = #TRACK_LEN#::int
				]]>
			</isNotEmpty>

			<isNotEmpty property="STRWRK_DE">
				<![CDATA[
					/* 공사정보.착공_일자 */
					AND tncntrwk.STRWRK_DE = #STRWRK_DE#
				]]>
			</isNotEmpty>

			<isNotEmpty property="COMPET_DE">
				<![CDATA[
					/* 공사정보.준공_일자 */
					AND tncntrwk.COMPET_DE = #COMPET_DE#
				]]>
			</isNotEmpty>

			<isNotEmpty property="CNTRWK_OPERT_CN">
				<![CDATA[
					/* 공사정보.공사_작업_내용 */
					AND tncntrwk.CNTRWK_OPERT_CN = #CNTRWK_OPERT_CN#
				]]>
			</isNotEmpty>

			<isNotEmpty property="FLAW_BEGIN_DE">
				<![CDATA[
					/* 공사정보.하자_시작_일자 */
					AND tncntrwk.FLAW_BEGIN_DE = #FLAW_BEGIN_DE#
				]]>
			</isNotEmpty>

			<isNotEmpty property="FLAW_END_DE">
				<![CDATA[
					/* 공사정보.하자_종료_일자 */
					AND tncntrwk.FLAW_END_DE = #FLAW_END_DE#
				]]>
			</isNotEmpty>

			<isNotEmpty property="TOT_AMOUNT">
				<![CDATA[
					/* 공사정보.총_금액 */
					AND tncntrwk.TOT_AMOUNT = #TOT_AMOUNT#::int
				]]>
			</isNotEmpty>

			<isNotEmpty property="RPAIR_THICK_DC">
				<![CDATA[
					/* 공사정보.보수_두께_설명 */
					AND tncntrwk.RPAIR_THICK_DC = #RPAIR_THICK_DC#
				]]>
			</isNotEmpty>

			<isNotEmpty property="RPAIR_THICK">
				<![CDATA[
					/* 공사정보.보수_두께 */
					AND tncntrwk.RPAIR_THICK = #RPAIR_THICK#::int
				]]>
			</isNotEmpty>

			<isNotEmpty property="RPAIR_AR">
				<![CDATA[
					/* 공사정보.보수_면적 */
					AND tncntrwk.RPAIR_AR = #RPAIR_AR#::int
				]]>
			</isNotEmpty>

			<isNotEmpty property="RPAIR_BT">
				<![CDATA[
					/* 공사정보.보수_폭 */
					AND tncntrwk.RPAIR_BT = #RPAIR_BT#::int
				]]>
			</isNotEmpty>

			<isNotEmpty property="USE_AT">
				<![CDATA[
					/* 공사정보.사용_여부 */
					AND tncntrwk.USE_AT = #USE_AT#
				]]>
			</isNotEmpty>

			<isNotEmpty property="DELETE_AT">
				<![CDATA[
					/* 공사정보.삭제_여부 */
					AND tncntrwk.DELETE_AT = #DELETE_AT#
				]]>
			</isNotEmpty>

			<isNotEmpty property="CRTR_NO">
				<![CDATA[
					/* 공사정보.생성자_번호 */
					AND tncntrwk.CRTR_NO = #CRTR_NO#::int
				]]>
			</isNotEmpty>

			<isNotEmpty property="CREAT_DT">
				<![CDATA[
					/* 공사정보.생성_일시 */
					AND tncntrwk.CREAT_DT = #CREAT_DT#
				]]>
			</isNotEmpty>

			<isNotEmpty property="UPDUSR_NO">
				<![CDATA[
					/* 공사정보.수정자_번호 */
					AND tncntrwk.UPDUSR_NO = #UPDUSR_NO#::int
				]]>
			</isNotEmpty>

			<isNotEmpty property="UPDT_DT">
				<![CDATA[
					/* 공사정보.수정_일시 */
					AND tncntrwk.UPDT_DT = #UPDT_DT#
				]]>
			</isNotEmpty>

			<isNotEmpty property="EXTRL_REGIST_AT">
				<![CDATA[
					/* 공사정보.외부_등록_여부 */
					AND tncntrwk.EXTRL_REGIST_AT = #EXTRL_REGIST_AT#
				]]>
			</isNotEmpty>

			<isNotEmpty property="FILE_NO">
				<![CDATA[
					/* 공사정보.파일_번호 */
					AND tncntrwk.FILE_NO = #FILE_NO#::int
				]]>
			</isNotEmpty>
	<![CDATA[
		)
		SELECT tncntrwk.* FROM
		(
		SELECT
			tncntrwk.CNTRWK_ID /* 공사정보.공사_ID */
			, tncntrwk.FULL_CNTRWK_NM /* 공사정보.전체_공사_명 */
			, tncntrwk.CNTRWK_SE /* 공사정보.공사_구분 */
			, tncntrwk.DEPT_CODE /* 공사정보.부서_코드 */
			, tncntrwk.DETAIL_CNTRWK_NM /* 공사정보.세부_공사_명 */
			, tncntrwk.CNTRWK_CL /* 공사정보.공사_분류 */
			, tncntrwk.CNTRWK_YEAR /* 공사정보.공사_연도 */
			, tncntrwk.HT_SE /* 공사정보.반기_구분 */
			, tncntrwk.SPRVISR_NM /* 공사정보.감독원_명 */
			, tncntrwk.SPRVISR_TELNO /* 공사정보.감독원_전화번호 */
			, tncntrwk.SPRVISN_CO_NO /* 공사정보.감리_업체_번호 */
			, tncntrwk.SPRVISN_CO_NM /* 공사정보.감리_업체_명 */
			, tncntrwk.SPRVISN_CO_RPRSNT_TELNO /* 공사정보.감리_업체_대표_전화번호 */
			, tncntrwk.SPRVISN_CO_RPRSNTV_NM /* 공사정보.감리_업체_대표자_명 */
			, tncntrwk.CNSTRCT_CO_NO /* 공사정보.시공_업체_번호 */
			, tncntrwk.CNSTRCT_CO_NM /* 공사정보.시공_업체_명 */
			, tncntrwk.CNSTRCT_CO_RPRSNTV_NM /* 공사정보.시공_업체_대표자_명 */
			, tncntrwk.CNSTRCT_CO_TELNO /* 공사정보.시공_업체_전화번호 */
			, tncntrwk.SPT_AGENT_NM /* 공사정보.현장_대리인_명 */
			, tncntrwk.SPT_AGENT_TELNO /* 공사정보.현장_대리인_전화번호 */
			, tncntrwk.TRACK_LEN /* 공사정보.1차로_연장 */
			, tncntrwk.STRWRK_DE /* 공사정보.착공_일자 */
			, tncntrwk.COMPET_DE /* 공사정보.준공_일자 */
			, tncntrwk.CNTRWK_OPERT_CN /* 공사정보.공사_작업_내용 */
			, tncntrwk.FLAW_BEGIN_DE /* 공사정보.하자_시작_일자 */
			, tncntrwk.FLAW_END_DE /* 공사정보.하자_종료_일자 */
			, tncntrwk.TOT_AMOUNT /* 공사정보.총_금액 */
			, tncntrwk.RPAIR_THICK_DC /* 공사정보.보수_두께_설명 */
			, tncntrwk.RPAIR_THICK /* 공사정보.보수_두께 */
			, tncntrwk.RPAIR_AR /* 공사정보.보수_면적 */
			, tncntrwk.RPAIR_BT /* 공사정보.보수_폭 */
			, tncntrwk.USE_AT /* 공사정보.사용_여부 */
			, tncntrwk.DELETE_AT /* 공사정보.삭제_여부 */
			, tncntrwk.CRTR_NO /* 공사정보.생성자_번호 */
			, tncntrwk.CREAT_DT /* 공사정보.생성_일시 */
			, tncntrwk.UPDUSR_NO /* 공사정보.수정자_번호 */
			, tncntrwk.UPDT_DT /* 공사정보.수정_일시 */
			, tncntrwk.EXTRL_REGIST_AT /* 공사정보.외부_등록_여부 */
			, tncntrwk.FILE_NO /* 공사정보.파일_번호 */
						/* 공사정보.공사_ID */
			/* 공사정보.전체_공사_명 */
			, ROW_NUMBER() OVER( ORDER BY tncntrwk.CNTRWK_ID ASC, tncntrwk.FULL_CNTRWK_NM DESC )  ROW_NO
			FROM  tncntrwk
			WHERE 1=1
		)  tncntrwk
		WHERE 1=1
]]>
<![CDATA[
  		AND  tncntrwk.ROW_NO BETWEEN #firstIndex# + 1 AND #lastIndex#
]]>
<![CDATA[
		AND  tncntrwk.ROW_NO <= #lastIndex#	AND  ROW_NO > #firstIndex#
]]>


	</select>
	<select id="cntrwkDAO.selectCntrwkList"	parameterClass="cntrwkVO"	resultClass="cntrwkVO">
	    <![CDATA[
		/* cntrwkDAO.selectCntrwkList */
		/* 공사정보 조회 */
		SELECT * FROM (SELECT ROW_NUMBER() OVER() AS rn, tb.* FROM (
			SELECT
				tncntrwk.CNTRWK_ID/* 공사정보.공사_ID */
				,(SELECT code_nm FROM TC_CODE tccode WHERE tccode.code_val = tncntrwk.CNTRWK_SE) AS CNTRWK_SE/* 공사정보.공사_구분 */
				,tncntrwk.FULL_CNTRWK_NM/* 공사정보.전체_공사_명 */
				,tncntrwk.STRWRK_DE/* 공사정보.착공_일자 */
				,tncntrwk.COMPET_DE /* 공사정보.준공_일자 */
				,tncntrwk.FLAW_BEGIN_DE/* 공사정보.하자_시작_일자 */
				,tncntrwk.FLAW_END_DE/* 공사정보.하자_종료_일자 */
				,COALESCE((SELECT CO_NM  FROM TN_COMPANY tncompany WHERE tncompany.CO_NO = tncntrwk.CNSTRCT_CO_NO), tncntrwk.CNSTRCT_CO_NM) AS CNSTRCT_CO_NM/* 공사정보.시공_업체_명 */
				,COALESCE(dtl.TRACK_LEN,0) AS TRACK_LEN/* 총 연장 */
				,COALESCE(dtl.TOT_AMOUNT,0) AS TOT_AMOUNT/*총 공사금액 */
				,COALESCE(dtl.RPAIR_AR,0) AS RPAIR_AR/* 총 보수면적 */
				/*,dtl.route_code *//*노선번호*/
			 FROM TN_CNTRWK tncntrwk
	 LEFT OUTER JOIN ( SELECT tncntrwkdtl.CNTRWK_ID
	 						 /*,tncntrwkdtl.ROUTE_CODE*/
			                 ,SUM(tncntrwkdtl.TRACK_LEN)/1000 AS TRACK_LEN/* 공사상세정보.1차로_연장 */
			                 ,SUM(tncntrwkdtl.CNTRWK_AMOUNT) AS TOT_AMOUNT /* 공사상세정보.공사_금액 */
			                 ,SUM(tncntrwkdtl.RPAIR_AR) AS RPAIR_AR/* 공사상세정보.보수_면적 */
			            FROM
			                TN_CNTRWK_DTL tncntrwkdtl
			            WHERE
			                    1 = 1             /* 공사상세정보.공사_ID */
			                AND tncntrwkdtl.USE_AT ='Y'     /* 공사상세정보.사용_여부 */
			                AND tncntrwkdtl.delete_at ='N'   /* 공사상세정보.삭제_여부 */
			        GROUP BY   tncntrwkdtl.cntrwk_id /*,tncntrwkdtl.route_code */) dtl
			ON tncntrwk.CNTRWK_ID =  dtl.CNTRWK_ID
			 WHERE 1 = 1
                AND tncntrwk.USE_AT ='Y'
                AND tncntrwk.DELETE_AT ='N'
	]]>
	<isNotEmpty property="SCH_CNTRWK_SE"><![CDATA[ /* 공사정보.공사구분*/ ]]> AND tncntrwk.CNTRWK_SE = #SCH_CNTRWK_SE# </isNotEmpty>
	<isNotEmpty property="SCH_CNTRWK_NM"><![CDATA[ /* 공사정보.전체_공사_명 */ ]]> AND tncntrwk.FULL_CNTRWK_NM LIKE '%' || #SCH_CNTRWK_NM# || '%'</isNotEmpty>
	<isNotEmpty property="SCH_CO_NM"><![CDATA[ /* 공사정보.시공_업체_명 */]]> AND tncntrwk.CNSTRCT_CO_NM LIKE '%' || #SCH_CO_NM# || '%'</isNotEmpty>
	<isNotEmpty property="SCH_STRWRK_DE"><![CDATA[ /* 공사정보.착공_일자 */ AND tncntrwk.STRWRK_DE >= #SCH_STRWRK_DE# ]]></isNotEmpty>
	<isNotEmpty property="SCH_COMPET_DE"><![CDATA[ /* 공사정보.준공_일자 */ AND tncntrwk.COMPET_DE <= #SCH_COMPET_DE# ]]></isNotEmpty>
			<isNotEmpty property="orderByColumn">
				ORDER BY $orderByColumn$ $orderByType$
			</isNotEmpty>
			) tb) tncntrwk  WHERE 1=1
	<isEqual prepend=" " property="usePage" compareValue="true">
	<![CDATA[
	    AND rn BETWEEN #firstIndex# + 1 AND #firstIndex# + #recordCountPerPage#
	]]>
	</isEqual>
		<!-- <![CDATA[
			/* cntrwkDAO.selectCntrwkList */
			/* 공사정보 조회 */
			SELECT * FROM (SELECT ROW_NUMBER() OVER() AS rn, tb.* FROM (
				SELECT
					tncntrwk.CNTRWK_ID /* 공사정보.공사_ID */
					, tncntrwk.FULL_CNTRWK_NM /* 공사정보.전체_공사_명 */
					,(SELECT tccode.CODE_NM FROM TC_CODE tccode WHERE tccode.CODE_VAL = tncntrwk.CNTRWK_SE) AS CNTRWK_SE /* 공사정보.공사_구분 */
					, tncntrwk.DEPT_CODE /* 공사정보.부서_코드 */
					, tncntrwk.DETAIL_CNTRWK_NM /* 공사정보.세부_공사_명 */
					, tncntrwk.CNTRWK_CL /* 공사정보.공사_분류 */
					, tncntrwk.CNTRWK_YEAR /* 공사정보.공사_연도 */
					, tncntrwk.HT_SE /* 공사정보.반기_구분 */
					, tncntrwk.SPRVISR_NM /* 공사정보.감독원_명 */
					, tncntrwk.SPRVISR_TELNO /* 공사정보.감독원_전화번호 */
					, tncntrwk.SPRVISN_CO_NO /* 공사정보.감리_업체_번호 */
					, tncntrwk.SPRVISN_CO_NM /* 공사정보.감리_업체_명 */
					, tncntrwk.SPRVISN_CO_RPRSNT_TELNO /* 공사정보.감리_업체_대표_전화번호 */
					, tncntrwk.SPRVISN_CO_RPRSNTV_NM /* 공사정보.감리_업체_대표자_명 */
					, tncntrwk.CNSTRCT_CO_NO /* 공사정보.시공_업체_번호 */
					, tncntrwk.CNSTRCT_CO_NM /* 공사정보.시공_업체_명 */
					, tncntrwk.CNSTRCT_CO_RPRSNTV_NM /* 공사정보.시공_업체_대표자_명 */
					, tncntrwk.CNSTRCT_CO_TELNO /* 공사정보.시공_업체_전화번호 */
					, tncntrwk.SPT_AGENT_NM /* 공사정보.현장_대리인_명 */
					, tncntrwk.SPT_AGENT_TELNO /* 공사정보.현장_대리인_전화번호 */
					, tncntrwk.TRACK_LEN /* 공사정보.1차로_연장 */
					, tncntrwk.STRWRK_DE /* 공사정보.착공_일자 */
					, tncntrwk.COMPET_DE /* 공사정보.준공_일자 */
					, tncntrwk.CNTRWK_OPERT_CN /* 공사정보.공사_작업_내용 */
					, tncntrwk.FLAW_BEGIN_DE /* 공사정보.하자_시작_일자 */
					, tncntrwk.FLAW_END_DE /* 공사정보.하자_종료_일자 */
					, tncntrwk.TOT_AMOUNT /* 공사정보.총_금액 */
					, tncntrwk.RPAIR_THICK_DC /* 공사정보.보수_두께_설명 */
					, tncntrwk.RPAIR_THICK /* 공사정보.보수_두께 */
					, tncntrwk.RPAIR_AR /* 공사정보.보수_면적 */
					, tncntrwk.RPAIR_BT /* 공사정보.보수_폭 */
					, tncntrwk.USE_AT /* 공사정보.사용_여부 */
					, tncntrwk.DELETE_AT /* 공사정보.삭제_여부 */
					, tncntrwk.CRTR_NO /* 공사정보.생성자_번호 */
					, tncntrwk.CREAT_DT /* 공사정보.생성_일시 */
					, tncntrwk.UPDUSR_NO /* 공사정보.수정자_번호 */
					, tncntrwk.UPDT_DT /* 공사정보.수정_일시 */
					, tncntrwk.EXTRL_REGIST_AT /* 공사정보.외부_등록_여부 */
					, tncntrwk.FILE_NO /* 공사정보.파일_번호 */
				FROM TN_CNTRWK tncntrwk
		]]>
			<include refid="cntrwkDAO.selectCntrwkList.where" />
		<![CDATA[

				) tb) tncntrwk  WHERE 1=1
		]]>
		<isEqual prepend=" " property="usePage" compareValue="true">
		<![CDATA[
			AND rn BETWEEN #firstIndex# + 1 AND #firstIndex# + #recordCountPerPage#
		]]>
		</isEqual> -->
	</select>

	<select id="cntrwkDAO.selectCntrwkListTotalCount"
		parameterClass="cntrwkVO"
		resultClass="int">
	<![CDATA[
			/* cntrwkDAO.selectCntrwkListTotalCount */
			/* 공사정보 목록 개수 조회  */
			SELECT COUNT(*) AS totCnt
			FROM TN_CNTRWK tncntrwk
	]]>
			<include refid="cntrwkDAO.selectCntrwkList.where" />
	<![CDATA[
	]]>
	</select>



	<select id="cntrwkDAO.selectCntrwkListByItgrtn"	parameterClass="cntrwkVO"	resultClass="cntrwkVO">
		<![CDATA[
			/* cntrwkDAO.selectCntrwkListByItgrtn */
			/* JOY_ 통합정보조회 - 공사정보 조회 : 선택된 셀에 대한 공사정보 조회 */
			SELECT * FROM (
				SELECT ROW_NUMBER() OVER() AS rn, tb.* FROM (
					SELECT
						tncntrwkcellinfo.PAV_CELL_ID AS CELL_ID /* 공사_셀_정보.셀번호 */
						, tncntrwk.CNTRWK_ID /* 공사상세정보.공사_ID */
						, tncntrwkdtl.DETAIL_CNTRWK_ID  /* 공사상세정보.세부_공사_ID */
						, tncntrwk.FULL_CNTRWK_NM /* 공사상세정보.전체_공사_명 */
						, tncntrwk.STRWRK_DE /* 공사상세정보.착공_일자 */
						, tncntrwk.COMPET_DE /* 공사상세정보.준공_일자 */
					FROM TN_CNTRWK tncntrwk
						LEFT OUTER JOIN TN_CNTRWK_DTL tncntrwkdtl
						  ON tncntrwkdtl.CNTRWK_ID = tncntrwk.CNTRWK_ID
						LEFT OUTER JOIN TN_CNTRWK_CELL_INFO tncntrwkcellinfo
						  ON tncntrwkcellinfo.CNTRWK_ID = tncntrwkdtl.CNTRWK_ID
					WHERE 1=1
						AND tncntrwkdtl.DELETE_AT = 'N'
						AND tncntrwkdtl.USE_AT    = 'Y'
						AND tncntrwkcellinfo.PAV_CELL_ID IN
		]]>

		<iterate open="(" close=")" property="CELL_ID_ARR" conjunction=",">
			<![CDATA[
				#CELL_ID_ARR[]#
			]]>
		</iterate>

		<![CDATA[
					ORDER BY tncntrwkcellinfo.PAV_CELL_ID, tncntrwk.STRWRK_DE, tncntrwk.COMPET_DE
				) tb )
			WHERE 1=1
		]]>

		<isEqual prepend=" " property="usePage" compareValue="true">
			<![CDATA[
			    AND rn BETWEEN #firstIndex# + 1 AND #firstIndex# + #recordCountPerPage#
			]]>
		</isEqual>

	</select>


	<select id="cntrwkDAO.selectCntrwkListByItgrtnCnt"	parameterClass="cntrwkVO"	resultClass="int">
		<![CDATA[
			/* cntrwkDAO.selectCntrwkListByItgrtnCnt */
			/* JOY_ 통합정보조회 - 공사정보 조회 개수 : 선택된 셀에 대한 공사정보 조회 */
			SELECT COUNT(*) FROM (
				SELECT ROW_NUMBER() OVER() AS rn, tb.* FROM (
					SELECT
						tncntrwkcellinfo.PAV_CELL_ID AS CELL_ID /* 공사_셀_정보.셀번호 */
						, tncntrwk.CNTRWK_ID /* 공사상세정보.세부_공사_ID */
						, tncntrwkdtl.DETAIL_CNTRWK_ID  /* 공사상세정보.세부_공사_ID */
						, tncntrwk.FULL_CNTRWK_NM /* 공사상세정보.전체_공사_명 */
						, tncntrwk.STRWRK_DE /* 공사상세정보.착공_일자 */
						, tncntrwk.COMPET_DE /* 공사상세정보.준공_일자 */
					FROM TN_CNTRWK tncntrwk
						LEFT OUTER JOIN TN_CNTRWK_DTL tncntrwkdtl
						  ON tncntrwkdtl.CNTRWK_ID = tncntrwk.CNTRWK_ID
						LEFT OUTER JOIN TN_CNTRWK_CELL_INFO tncntrwkcellinfo
						  ON tncntrwkcellinfo.CNTRWK_ID = tncntrwkdtl.CNTRWK_ID
					WHERE 1=1
						AND tncntrwkdtl.DELETE_AT = 'N'
						AND tncntrwkdtl.USE_AT    = 'Y'
						AND tncntrwkcellinfo.PAV_CELL_ID IN
		]]>
		<iterate open="(" close=")" property="CELL_ID_ARR" conjunction=",">
			<![CDATA[
				#CELL_ID_ARR[]#
			]]>
		</iterate>
		<![CDATA[
					ORDER BY tncntrwkcellinfo.PAV_CELL_ID
				) tb )
			WHERE 1=1
		]]>

	</select>



	<select id="cntrwkDAO.selectCntrwkListExcel" parameterClass="cntrwkVO"	resultClass="hashmap">
    <![CDATA[
	/* cntrwkDAO.selectCntrwkListExcel */
	/* 공사정보 조회 엑셀저장*/
    SELECT * FROM (
        SELECT ROW_NUMBER() OVER() AS rn, tb.* FROM (
			SELECT
				tncntrwk.CNTRWK_ID/* 공사정보.공사_ID */
                ,(SELECT code_nm FROM TC_CODE tccode WHERE tccode.code_val = tncntrwk.CNTRWK_SE) AS CNTRWK_SE/* 공사정보.공사_구분 */
                ,tncntrwk.FULL_CNTRWK_NM/* 공사정보.전체_공사_명 */
                ,tncntrwk.STRWRK_DE/* 공사정보.착공_일자 */
                ,tncntrwk.COMPET_DE /* 공사정보.준공_일자 */
                ,tncntrwk.FLAW_BEGIN_DE/* 공사정보.하자_시작_일자 */
                ,tncntrwk.FLAW_END_DE/* 공사정보.하자_종료_일자 */
                ,COALESCE((SELECT CO_NM  FROM TN_COMPANY tncompany WHERE tncompany.CO_NO = tncntrwk.CNSTRCT_CO_NO), tncntrwk.CNSTRCT_CO_NM) AS CNSTRCT_CO_NM/* 공사정보.시공_업체_명 */
                ,COALESCE(dtl.TRACK_LEN,0) AS TRACK_LEN/* 총 연장 */
                ,COALESCE(dtl.TOT_AMOUNT,0) AS TOT_AMOUNT/*총 공사금액 */
                ,COALESCE(dtl.RPAIR_AR,0) AS RPAIR_AR/* 총 보수면적 */
			 FROM TN_CNTRWK tncntrwk
	 LEFT OUTER JOIN ( SELECT tncntrwkdtl.CNTRWK_ID
                              ,SUM(tncntrwkdtl.TRACK_LEN)/1000 AS TRACK_LEN/* 공사상세정보.1차로_연장 */
                              ,SUM(tncntrwkdtl.CNTRWK_AMOUNT) AS TOT_AMOUNT /* 공사상세정보.공사_금액 */
                              ,SUM(tncntrwkdtl.RPAIR_AR) AS RPAIR_AR/* 공사상세정보.보수_면적 */
                        FROM TN_CNTRWK_DTL tncntrwkdtl
                        WHERE 1 = 1             /* 공사상세정보.공사_ID */
                        AND tncntrwkdtl.USE_AT ='Y'     /* 공사상세정보.사용_여부 */
                        AND tncntrwkdtl.delete_at ='N'   /* 공사상세정보.삭제_여부 */
                        GROUP BY tncntrwkdtl.cntrwk_id) dtl
			ON tncntrwk.CNTRWK_ID =  dtl.CNTRWK_ID
			WHERE 1 = 1
			AND tncntrwk.USE_AT ='Y'
			AND tncntrwk.DELETE_AT ='N'
    ]]>
<isNotEmpty property="SCH_CNTRWK_SE"><![CDATA[ /* 공사정보.공사구분*/ ]]> AND tncntrwk.CNTRWK_SE = #SCH_CNTRWK_SE# </isNotEmpty>
<isNotEmpty property="SCH_CNTRWK_NM"><![CDATA[ /* 공사정보.전체_공사_명 */ ]]> AND tncntrwk.FULL_CNTRWK_NM LIKE '%' || #SCH_CNTRWK_NM# || '%'</isNotEmpty>
<isNotEmpty property="SCH_CO_NM"><![CDATA[ /* 공사정보.시공_업체_명 */]]> AND tncntrwk.CNSTRCT_CO_NM LIKE '%' || #SCH_CO_NM# || '%'</isNotEmpty>
<isNotEmpty property="SCH_STRWRK_DE"><![CDATA[ /* 공사정보.착공_일자 */ AND tncntrwk.STRWRK_DE >= #SCH_STRWRK_DE# ]]></isNotEmpty>
<isNotEmpty property="SCH_COMPET_DE"><![CDATA[ /* 공사정보.준공_일자 */ AND tncntrwk.COMPET_DE <= #SCH_COMPET_DE# ]]></isNotEmpty>
	        ORDER BY $orderByColumn$ $orderByType$
            ) tb
        ) tncntrwk  WHERE 1=1
<!-- 		ORDER BY
				tncntrwk.CNTRWK_ID /* 공사정보.공사_ID */
		) tb) tncntrwk  WHERE 1=1 -->
	</select>



<!-- 2018.11.27 엑셀저장 LIST 와 같은값나오게 수정
    <select id="cntrwkDAO.selectCntrwkListExcel" parameterClass="cntrwkVO"  resultClass="hashmap">
<![CDATA[
        /* cntrwkDAO.selectCntrwkListExcel */
        /* 공사정보 조회 */
        SELECT * FROM (SELECT ROW_NUMBER() OVER() AS rn, tb.* FROM (
            SELECT
                tncntrwk.CNTRWK_ID/* 공사정보.공사_ID */
                ,(SELECT code_nm FROM TC_CODE tccode WHERE tccode.code_val = tncntrwk.CNTRWK_SE) AS CNTRWK_SE/* 공사정보.공사_구분 */
                ,tncntrwk.FULL_CNTRWK_NM/* 공사정보.전체_공사_명 */
                ,tncntrwk.STRWRK_DE/* 공사정보.착공_일자 */
                ,tncntrwk.COMPET_DE /* 공사정보.준공_일자 */
                ,tncntrwk.FLAW_BEGIN_DE/* 공사정보.하자_시작_일자 */
                ,tncntrwk.FLAW_END_DE/* 공사정보.하자_종료_일자 */
                ,tncntrwk.CNSTRCT_CO_NM/* 공사정보.시공_업체_명 */
                ,REGEXP_REPLACE(REVERSE(REGEXP_REPLACE( REVERSE(TO_CHAR(ROUND(dtl.TRACK_LEN,2))), '([0-9]{3})','\1,')), '^,','') AS TRACK_LEN /* 총 연장 */
                ,REGEXP_REPLACE(REVERSE(REGEXP_REPLACE( REVERSE(TO_CHAR(ROUND(dtl.TOT_AMOUNT,0))), '([0-9]{3})','\1,')), '^,','') AS TOT_AMOUNT/*총 공사금액 */
                ,REGEXP_REPLACE(REVERSE(REGEXP_REPLACE( REVERSE(TO_CHAR(ROUND(dtl.RPAIR_AR,2))), '([0-9]{3})','\1,')), '^,','') AS RPAIR_AR /* 총 보수면적 */
             FROM TN_CNTRWK tncntrwk
     LEFT OUTER JOIN ( SELECT tncntrwkdtl.CNTRWK_ID
                             ,SUM(tncntrwkdtl.TRACK_LEN)/1000 AS TRACK_LEN/* 공사상세정보.1차로_연장 */
                             ,SUM(tncntrwkdtl.CNTRWK_AMOUNT)/1000 AS TOT_AMOUNT /* 공사상세정보.공사_금액 */
                             ,SUM(tncntrwkdtl.RPAIR_AR) AS RPAIR_AR/* 공사상세정보.보수_면적 */
                        FROM
                            TN_CNTRWK_DTL tncntrwkdtl
                        WHERE
                                1 = 1             /* 공사상세정보.공사_ID */
                            AND tncntrwkdtl.USE_AT ='Y'     /* 공사상세정보.사용_여부 */
                            AND tncntrwkdtl.delete_at ='N'   /* 공사상세정보.삭제_여부 */
                    GROUP BY   tncntrwkdtl.cntrwk_id) dtl
            ON tncntrwk.CNTRWK_ID =  dtl.CNTRWK_ID
            WHERE 1 = 1
            AND tncntrwk.USE_AT ='Y'
            AND tncntrwk.DELETE_AT ='N'
]]>
<isNotEmpty property="SCH_CNTRWK_SE"><![CDATA[ /* 공사정보.공사구분*/ ]]> AND tncntrwk.CNTRWK_SE = #SCH_CNTRWK_SE# </isNotEmpty>
<isNotEmpty property="SCH_CNTRWK_NM"><![CDATA[ /* 공사정보.전체_공사_명 */ ]]> AND tncntrwk.FULL_CNTRWK_NM LIKE '%' || #SCH_CNTRWK_NM# || '%'</isNotEmpty>
<isNotEmpty property="SCH_CO_NM"><![CDATA[ /* 공사정보.시공_업체_명 */]]> AND tncntrwk.CNSTRCT_CO_NM LIKE '%' || #SCH_CO_NM# || '%'</isNotEmpty>
<isNotEmpty property="SCH_STRWRK_DE"><![CDATA[ /* 공사정보.착공_일자 */ AND tncntrwk.STRWRK_DE >= #SCH_STRWRK_DE# ]]></isNotEmpty>
<isNotEmpty property="SCH_COMPET_DE"><![CDATA[ /* 공사정보.준공_일자 */ AND tncntrwk.COMPET_DE <= #SCH_COMPET_DE# ]]></isNotEmpty>
<![CDATA[
        ORDER BY
                tncntrwk.CNTRWK_ID /* 공사정보.공사_ID */
        ) tb) tncntrwk  WHERE 1=1
]]>
    </select>
     -->


	<select id="cntrwkDAO.selectCntrwkYearList" resultClass="cntrwkVO">
<![CDATA[
		/* cntrwkDAO.selectCntrwkYearList */
		/* 공사정보 년도 목록 조회 */
		SELECT CNTRWK_YEAR
		  FROM TN_CNTRWK
		 GROUP BY CNTRWK_YEAR
]]>
	</select>

	<sql id="cntrwkDAO.selectCntrwkHistExcel.where">
		<isNotEmpty property="CNTRWK_SE">
			AND tncntrwk.CNTRWK_SE = #CNTRWK_SE#
		</isNotEmpty>
		<isNotEmpty property="DEPT_CODE">
			AND tncntrwk.DEPT_CODE = #DEPT_CODE#
		</isNotEmpty>
		<isNotEmpty property="CNTRWK_YEAR">
			AND tncntrwk.CNTRWK_YEAR = #CNTRWK_YEAR#
		</isNotEmpty>
	</sql>



	<select id="cntrwkDAO.selectCntrwkHistTotalExcel" parameterClass="cntrwkVO"	resultClass="hashmap">
<![CDATA[
		/* cntrwkDAO.selectCntrwkHistTotalExcel */
		/* 정비공사내역 종합 통계 */
		SELECT  COALESCE(COUNT(ROUTE_CODE),0) ROUTE_CN
		      , COALESCE(SUM(DETAIL_CNTRWK_ID),0) DETAIL_CNTRWK_CN
		      , COALESCE(MIN(MIN_RPAIR_BT),0) MIN_RPAIR_BT
		      , COALESCE(MAX(MAX_RPAIR_BT),0) MAX_RPAIR_BT
		      , COALESCE(SUM(RPAIR_LEN),0) RPAIR_LEN
		      , COALESCE(SUM(RPAIR_AR),0) RPAIR_AR
		      , COALESCE(SUM(CNTRWK_AMOUNT),0) CNTRWK_AMOUNT
		FROM(
				SELECT tncntrwk.CNTRWK_SE
					 , tncntrwkdtl.ROUTE_CODE
					 , COUNT(tncntrwkdtl.DETAIL_CNTRWK_ID) DETAIL_CNTRWK_ID
					 , MIN(COALESCE(tncntrwkdtl.RPAIR_BT,0)) MIN_RPAIR_BT
					 , MAX(COALESCE(tncntrwkdtl.RPAIR_BT,0)) MAX_RPAIR_BT
					 , MAX(COALESCE(tncntrwkdtl.ENDPT,0)) - MIN(COALESCE(tncntrwkdtl.STRTPT,0)) RPAIR_LEN
					 , SUM(COALESCE(tncntrwkdtl.RPAIR_AR,0)) RPAIR_AR
					 , SUM(COALESCE(tncntrwkdtl.CNTRWK_AMOUNT,0)) CNTRWK_AMOUNT
				  FROM TN_CNTRWK tncntrwk
				  LEFT OUTER JOIN TN_CNTRWK_DTL tncntrwkdtl
					ON tncntrwkdtl.CNTRWK_ID = tncntrwk.CNTRWK_ID
				   AND tncntrwkdtl.USE_AT = 'Y'
				   AND tncntrwkdtl.DELETE_AT = 'N'
				 WHERE tncntrwk.DELETE_AT = 'N'
				   AND tncntrwk.USE_AT = 'Y'
]]>
		<include refid="cntrwkDAO.selectCntrwkHistExcel.where" />
<![CDATA[
				 GROUP BY tncntrwk.CNTRWK_SE, tncntrwkdtl.ROUTE_CODE
		)
]]>
	</select>


	<select id="cntrwkDAO.selectCntrwkHistListExcel" parameterClass="cntrwkVO"	resultClass="hashmap">
<![CDATA[
		/* cntrwkDAO.selectCntrwkHistListExcel */
		/* 정비공사내역 공사구분별 상세 조회 */
		SELECT   tnrouteinfo.ROAD_NAME ROUTE_NM
		       , tncntrwkdtl.ROAD_NM
		       , (SELECT tccode.CODE_NM FROM TC_CODE tccode
				   WHERE tccode.CODE_VAL = tncntrwk.CNTRWK_CL AND tccode.USE_AT='Y'
				     AND tccode.DELETE_AT = 'N' AND tccode.CL_CODE = 'CWCL') CNTRWK_CL_NM
		       , tncntrwkdtl.DETAIL_CNTRWK_NM
		       , COALESCE(tncntrwkdtl.RPAIR_BT,0) RPAIR_BT
		       , COALESCE(tncntrwkdtl.ENDPT,0) - COALESCE(tncntrwkdtl.STRTPT,0) RPAIR_LEN
		       , COALESCE(tncntrwkdtl.RPAIR_AR,0) RPAIR_AR
		       , COALESCE(tncntrwkdtl.CNTRWK_AMOUNT,0) CNTRWK_AMOUNT
		       , tncntrwkdtl.RPAIR_MATRL_PRDCT_CO_NM
		       , CASE WHEN 
			   		tncntrwkdtl.CNSTRCT_CO_NO = NULL
			   	 THEN
			   	 	tncntrwkdtl.CNSTRCT_CO_NM
			   	 ELSE
			   	 	(SELECT tncompany.CO_NM FROM TN_COMPANY tncompany
					  WHERE tncompany.USE_AT='Y' AND tncompany.DELETE_AT='N'
					    AND tncompany.CO_NO = tncntrwkdtl.CNSTRCT_CO_NO)
				 END CNSTRCT_CO_NM
		       , COALESCE(tncntrwkdtl.BEFORE_PAV_YEAR, '없음') BEFORE_PAV_YEAR
		       , TO_CHAR(TO_DATE(tncntrwkdtl.RPAIR_BEGIN_DE), 'YYYY-MM-DD') RPAIR_BEGIN_DE
		       , TO_CHAR(TO_DATE(tncntrwkdtl.RPAIR_END_DE), 'YYYY-MM-DD') RPAIR_END_DE
		       , tncntrwkdtl.RPAIR_THICK_ASCON
		       , tncntrwkdtl.RPAIR_THICK_CNTR
		       , tncntrwkdtl.RPAIR_THICK_BASE
		       , CASE WHEN
			   		tncntrwkdtl.PAV_MATRL_ASCON_CODE = 'PM00000008'
			   	 THEN
			   	 	PAV_MATRL_ASCON_ETC
			   	 ELSE
			   	 	(SELECT tcpavmatrl.PAV_MATRL_NM FROM TC_PAV_MATRL tcpavmatrl
					  WHERE tcpavmatrl.PAV_MATRL_CODE = tncntrwkdtl.PAV_MATRL_ASCON_CODE
						AND tcpavmatrl.USE_AT='Y' AND tcpavmatrl.DELETE_AT = 'N')
				 END PAV_MATRL_ASCON_NM 
				, CASE WHEN
			   		tncntrwkdtl.PAV_MATRL_CNTR_CODE = 'PM00000008'
			   	 THEN
			   	 	PAV_MATRL_CNTR_ETC
			   	 ELSE
			   	 	(SELECT tcpavmatrl.PAV_MATRL_NM FROM TC_PAV_MATRL tcpavmatrl
						WHERE tcpavmatrl.PAV_MATRL_CODE = tncntrwkdtl.PAV_MATRL_CNTR_CODE
							AND tcpavmatrl.USE_AT='Y' AND tcpavmatrl.DELETE_AT = 'N')
				 END PAV_MATRL_CNTR_NM 
			   , CASE WHEN
			   		tncntrwkdtl.PAV_MATRL_BASE_CODE = 'PM00000008'
			   	 THEN
			   	 	PAV_MATRL_BASE_ETC
			   	 ELSE
			   	 	(SELECT tcpavmatrl.PAV_MATRL_NM FROM TC_PAV_MATRL tcpavmatrl
					  WHERE tcpavmatrl.PAV_MATRL_CODE = tncntrwkdtl.PAV_MATRL_BASE_CODE
						AND tcpavmatrl.USE_AT='Y' AND tcpavmatrl.DELETE_AT = 'N')
				 END PAV_MATRL_BASE_NM
		       , (SELECT tcdept.LOWEST_DEPT_NM FROM TC_DEPT tcdept
				   WHERE tcdept.DEPT_CODE = tncntrwk.DEPT_CODE
					 AND tcdept.USE_AT='Y' AND tcdept.DELETE_AT = 'N') DEPT_NM
		       , tncntrwk.FULL_CNTRWK_NM
			FROM TN_CNTRWK_DTL tncntrwkdtl
		   INNER JOIN TN_CNTRWK tncntrwk
			  ON tncntrwk.CNTRWK_ID = tncntrwkdtl.CNTRWK_ID
			 AND tncntrwk.USE_AT = 'Y'
			 AND tncntrwk.DELETE_AT = 'N'
			LEFT OUTER JOIN TN_ROUTE_INFO tnrouteinfo
			  ON tnrouteinfo.ROAD_NO = tncntrwkdtl.ROUTE_CODE
		   WHERE tncntrwkdtl.USE_AT = 'Y'
			 AND tncntrwkdtl.DELETE_AT = 'N'
]]>
		<include refid="cntrwkDAO.selectCntrwkHistExcel.where" />
	</select>

		<select id="cntrwkDAO.selectCntrwkCellId"	parameterClass="cntrwkVO"	resultClass="cntrwkVO">
	    <![CDATA[
		/* cntrwkDAO.selectCntrwkCellId */
		/* JOY_ 공사정보에 따른 CELL_ID 조회 */
		SELECT dtl.cell_id
		  FROM TN_CNTRWK tncntrwk
		    LEFT OUTER JOIN (
		        SELECT
		            cell10.CELL_ID, /* CELL_10.CELL_ID */
		            tncntrwkdtl.CNTRWK_ID,/* 공사상세정보.공사ID */
		            tncntrwkdtl.ROUTE_CODE,/* 공사상세정보.노선번호 */
		            tncntrwkdtl.DIRECT_CODE,/* 공사상세정보.행선 */
		            tncntrwkdtl.TRACK,/* 공사상세정보.차로 */
		            tncntrwkdtl.STRTPT,/* 공사상세정보.시점 */
		            tncntrwkdtl.ENDPT/* 공사상세정보.종점 */
		        FROM TN_CNTRWK_DTL tncntrwkdtl
		            LEFT OUTER JOIN CELL_10 cell10 ON
		                tncntrwkdtl.DIRECT_CODE = cell10.DIRECT_CODE
		            AND tncntrwkdtl.ROUTE_CODE = cell10.ROUTE_CODE
		            AND tncntrwkdtl.TRACK = cell10.TRACK
		            AND tncntrwkdtl.STRTPT = cell10.STRTPT
		            AND tncntrwkdtl.ENDPT = cell10.ENDPT
		        WHERE 1 = 1
		            AND tncntrwkdtl.USE_AT = 'Y'     /* 공사상세정보.사용_여부 */
		            AND tncntrwkdtl.DELETE_AT = 'N'   /* 공사상세정보.삭제_여부 */
		        GROUP BY
		            cell10.CELL_ID,
		            tncntrwkdtl.CNTRWK_ID,
		            tncntrwkdtl.DIRECT_CODE,
		            tncntrwkdtl.ROUTE_CODE,
		            tncntrwkdtl.TRACK,
		            tncntrwkdtl.STRTPT,
		            tncntrwkdtl.ENDPT
		    ) dtl ON tncntrwk.CNTRWK_ID = dtl.CNTRWK_ID
		WHERE 1 = 1
		    AND tncntrwk.CNTRWK_ID = #CNTRWK_ID# /* 공사정보.공사_ID */
		    AND tncntrwk.DELETE_AT = 'N'
		    AND tncntrwk.USE_AT = 'Y'
]]>
</select>




    <select id="cntrwkDAO.selectCntrwkListBySctn" parameterClass="cntrwkVO"   resultClass="cntrwkVO">
        <![CDATA[
            /* cntrwkDAO.selectCntrwkListBySctn */
            /* JOY_ 예측 - 공사이력조회 */
            SELECT * FROM (
                SELECT ROW_NUMBER() OVER() AS rn, tb.* FROM (
                    SELECT
					    tncntrwkdtl.CNTRWK_ID
					    , tncntrwkdtl.DETAIL_CNTRWK_ID
					    , cell10.CELL_ID
					    , tncntrwk.FULL_CNTRWK_NM
					    , tncntrwkdtl.DETAIL_CNTRWK_NM
					    , tncntrwk.strwrk_de
					    , tncntrwk.compet_de
					FROM CELL_SECT cellsect
					INNER JOIN CELL_10 cell10
					   ON cell10.ROUTE_CODE = cellsect.ROUTE_CODE
					  AND cell10.DIRECT_CODE = cellsect.DIRECT_CODE
					  AND cell10.TRACK = cellsect.TRACK
					  AND cell10.STRTPT >= cellsect.STRTPT
					  AND cell10.ENDPT <= cellsect.ENDPT
					INNER JOIN TN_CNTRWK_CELL_INFO tncntrwkcellinfo
					   ON tncntrwkcellinfo.PAV_CELL_ID = cell10.CELL_ID
					INNER JOIN TN_CNTRWK tncntrwk
					   ON tncntrwk.CNTRWK_ID = tncntrwkcellinfo.CNTRWK_ID
					INNER JOIN TN_CNTRWK_DTL tncntrwkdtl
					   ON tncntrwkdtl.CNTRWK_ID = tncntrwk.CNTRWK_ID
					WHERE 1=1
					  AND tncntrwk.USE_AT = 'Y'
					  AND tncntrwk.DELETE_AT = 'N'
					  AND cellsect.CELL_ID = #CELL_ID#
					ORDER BY tncntrwkdtl.DETAIL_CNTRWK_ID, cell10.CELL_ID
                ) tb
            ) WHERE 1=1
        ]]>

        <isEqual prepend=" " property="usePage" compareValue="true">
            <![CDATA[
                AND rn BETWEEN #firstIndex# + 1 AND #firstIndex# + #recordCountPerPage#
            ]]>
        </isEqual>

    </select>

    <select id="cntrwkDAO.selectCntrwkListBySctnCnt" parameterClass="cntrwkVO"   resultClass="int">
        <![CDATA[
            /* cntrwkDAO.selectCntrwkListBySctnCnt */
            /* JOY_ 예측 - 공사이력 갯수조회 */
            SELECT COUNT(*) FROM (
                SELECT ROW_NUMBER() OVER() AS rn, tb.* FROM (
                    SELECT
                        tncntrwkdtl.CNTRWK_ID
                        , tncntrwkdtl.DETAIL_CNTRWK_ID
                        , cell10.CELL_ID
                        , tncntrwk.FULL_CNTRWK_NM
                        , tncntrwkdtl.DETAIL_CNTRWK_NM
                        , tncntrwk.strwrk_de
                        , tncntrwk.compet_de
                    FROM CELL_SECT cellsect
                    INNER JOIN CELL_10 cell10
                       ON cell10.ROUTE_CODE = cellsect.ROUTE_CODE
                      AND cell10.DIRECT_CODE = cellsect.DIRECT_CODE
                      AND cell10.TRACK = cellsect.TRACK
                      AND cell10.STRTPT >= cellsect.STRTPT
                      AND cell10.ENDPT <= cellsect.ENDPT
                    INNER JOIN TN_CNTRWK_CELL_INFO tncntrwkcellinfo
                       ON tncntrwkcellinfo.PAV_CELL_ID = cell10.CELL_ID
                    INNER JOIN TN_CNTRWK tncntrwk
                       ON tncntrwk.CNTRWK_ID = tncntrwkcellinfo.CNTRWK_ID
                    INNER JOIN TN_CNTRWK_DTL tncntrwkdtl
                       ON tncntrwkdtl.CNTRWK_ID = tncntrwk.CNTRWK_ID
                    WHERE 1=1
                      AND tncntrwk.USE_AT = 'Y'
                      AND tncntrwk.DELETE_AT = 'N'
                      AND cellsect.CELL_ID = #CELL_ID#
                    ORDER BY tncntrwkdtl.DETAIL_CNTRWK_ID, cell10.CELL_ID
                ) tb
            ) WHERE 1=1
        ]]>
    </select>

</sqlMap>
